syntax = "proto3";

package graph;
option go_package="github.com/ilnar/wf/gen/pb/graph";

import "google/protobuf/duration.proto";

enum ActionResult {
    INVALID = 0;
    ERROR = 1;
    SUCCESS = 2;
}

message TransitionCondition {
    optional ActionResult result = 1;
}

message Action {
    string addr = 1;
    string name = 2;
    google.protobuf.Duration timeout = 3;
}

message Node {
    string id = 1;
    string name = 2;
    optional Action action = 3;
}

message Edge {
    string from_id = 1;
    string to_id = 2;
    TransitionCondition condition = 3;
}

message Graph {
    string start = 1;
    repeated Node nodes = 2;
    repeated Edge edges = 3;
}